/**
 * jquery.previewer.js - v1.0.0 - 2016-03-17
 * https://github.com/jinqiangshou/jquery-previewer
 * Copyright (c) 2016 Horst Xu
 * Licensed MIT (http://www.opensource.org/licenses/mit-license.php)
 */
!function(e,t,i){"use strict";var n={browserType:function(){var e=navigator.userAgent.toLowerCase(),t=/msie/.test(e)?"ie":/firefox/.test(e)?"firefox":/opera/.test(e)?"opera":/chrome/.test(e)?"chrome":/safari/.test(e)?"safari":"";return t}(),getWindowSize:function(){var e={};return e.winWidth=t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||1,e.winHeight=t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||1,e},stringEncode:function(){var e=document.createElement("div");return function(t){return e.innerHTML="",e.appendChild(document.createTextNode(t)),e.innerHTML}}(),domAppend:function(t,i,n){var o=t.clientX-1,r=t.clientY-1,c=n.css({position:"fixed","z-index":99999,left:o,top:r}).append(i);e(t.target).append(c)},imagePreload:function(e){var t=new Image;t.src=e,t.onload=function(){}},applyCSS:function(e,t){"object"==typeof e&&t.css(e)},adjustPosition:function(e){var t=this.getWindowSize(),i=t.winWidth,n=t.winHeight,o=parseInt(e.css("height")),r=parseInt(e.css("width")),c=parseInt(e.css("left")),s=parseInt(e.css("top"));s+o>n&&e.css({top:n-o-30+"px"}),c+r>i&&e.css({left:i-r-30+"px"})},resizeImage:function(e){var t=this.getWindowSize(),i=t.winWidth,n=t.winHeight,o=parseInt(e.css("height"))||1,r=parseInt(e.css("width"))||1,c=.5*n,s=0;o>c&&(s=c/o*r,e.css({height:c+"px",width:s+"px"}),o=c||1,r=s||1);var a=.7*i,d=0;return r>a&&(d=a/r*o,e.css({height:d+"px",width:a+"px"}),r=a,o=d),{imgWidth:r,imgHeight:o}}},o=function(t,i){this.container=t,this.cbFunction=null;var n=e("<div>");this.options=e.extend({type:"image",src:"",trigger:"click",text:"",containerCSS:{}},i,{div:n}),this.init()};o.prototype.init=function(){var t=this;switch(n.applyCSS(t.options.containerCSS,t.options.div),t.options.type){case"image":t.initImagePreview();break;case"text":t.initTextPreview()}e(t.container).on(t.options.trigger,function(e){t.cbFunction.call(t,e,t.options)})},o.prototype.initTextPreview=function(){var e=this;switch(e.options.trigger){case"click":e.cbFunction=e.clickTextCb;break;case"hover":e.options.trigger="mouseenter",e.cbFunction=e.hoverTextCb;break;default:e.options.trigger="click",e.cbFunction=e.clickTextCb}},o.prototype.clickTextCb=function(t,i){var o=this;i.div.css({"max-width":"400px"});var r=e("<p>");r.css({"word-break":"normal","word-wrap":"break-word"}),r.text(i.text),i.div.empty(),i.div.remove(),n.domAppend(t,r,i.div),n.adjustPosition(i.div),i.div.one("mouseleave",function(){e(o.container).off("mouseleave"),i.div.empty(),i.div.remove()}),e(o.container).one("mouseleave",function(){i.div.off("mouseleave"),i.div.empty(),i.div.remove()})},o.prototype.hoverTextCb=function(e,t){var i=this;i.clickTextCb(e,t)},o.prototype.initImagePreview=function(){var e=this;switch(e.options.trigger){case"click":e.cbFunction=e.clickImageCb;break;case"hover":e.options.trigger="mouseenter",e.cbFunction=e.hoverImageCb;break;default:e.options.trigger="click",e.cbFunction=e.clickImageCb}n.imagePreload(e.options.src)},o.prototype.clickImageCb=function(t,i){var o=this,r=new Image;r.src=o.options.src,i.div.empty(),i.div.remove(),r.onload=function(){n.domAppend(t,e(r),i.div),n.resizeImage(e(r)),n.adjustPosition(i.div)},i.div.one("mouseleave",function(){e(o.container).off("mouseleave"),i.div.empty(),i.div.remove()}),e(o.container).one("mouseleave",function(){i.div.off("mouseleave"),i.div.empty(),i.div.remove()})},o.prototype.hoverImageCb=function(e,t){var i=this;i.clickImageCb(e,t)},e.fn.previewer=function(e){return this.each(function(){new o(this,e)})}}(jQuery,window);